# City Expert Bot üåç

Telegram-–±–æ—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, –æ—Ç–µ–ª–µ–π –∏ –º–µ—Å—Ç –æ—Ç–¥—ã—Ö–∞ –≤ –†–æ—Å—Å–∏–∏ –∏ –º–∏—Ä–µ

## üîπ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

‚úÖ –ü–æ–∏—Å–∫ –º–µ—Å—Ç –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º  
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É –∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é  
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–¥—Ä–µ—Å–∞, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, —Å–∞–π—Ç–∞  
‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ"  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (`/favorites`)  
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞ (`/history`)  

## üî∏ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API

### 1. Google Maps Places API (—á–µ—Ä–µ–∑ RapidAPI)
**–ë–∞–∑–æ–≤—ã–π URL**: `https://google-map-places-new-v2.p.rapidapi.com`  
**–¢—Ä–µ–±—É–µ–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**:
```http
X-RapidAPI-Key: –≤–∞—à_–∫–ª—é—á
X-RapidAPI-Host: google-map-places-new-v2.p.rapidapi.com
Content-Type: application/json
```

## –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–∏—Å–∫–∞ –º–µ—Å—Ç:

```
POST /v1/places:searchText
```

## –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

```
{
  "textQuery": "–æ—Ç–µ–ª–∏ –°–æ—á–∏",
  "languageCode": "ru",
  "regionCode": "RU",
  "locationBias": {
    "circle": {
      "center": {
        "latitude": 43.5855,
        "longitude": 39.7231
      },
      "radius": 5000
    }
  }
}
```

## –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```
{
  "places": [
    {
      "name": "places/123456",
      "id": "123456",
      "displayName": {
        "text": "Radisson Rosa Khutor",
        "languageCode": "ru"
      },
      "formattedAddress": "—É–ª. –û–ª–∏–º–ø–∏–π—Å–∫–∞—è, 35, –≠—Å—Ç–æ—Å–∞–¥–æ–∫",
      "location": {
        "latitude": 43.6575,
        "longitude": 40.3139
      },
      "rating": 4.7,
      "websiteUri": "https://www.radissonhotels.com",
      "nationalPhoneNumber": "+7 862 123-45-67",
      "currentOpeningHours": {
        "openNow": true,
        "periods": [
          {
            "open": {"day": "MONDAY", "time": "0800"},
            "close": {"day": "MONDAY", "time": "2200"}
          }
        ]
      },
      "photos": [
        {"name": "photos/123456"}
      ]
    }
  ]
}
```

## üìã –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
**/start** - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º

**/help** - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º

### –ü–æ–∏—Å–∫–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
üîç –ü–æ–∏—Å–∫ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤ Google Maps Places API

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ API:

```
await api.search("–¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –°–æ—á–∏")
```

### üìç –†—è–¥–æ–º —Å–æ –º–Ω–æ–π
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–∏—Å–∫–∞

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ API:

```
await api.search("–∫–∞—Ñ–µ", latitude=43.5855, longitude=39.7231)
```

### üìñ –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞ (/history)

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```
üîç –ü–æ–∏—Å–∫: "–æ—Ç–µ–ª–∏ –°–æ—á–∏"
üïí 2024-05-06 14:30
```

### ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (/favorites)

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```commandline
üèõ Radisson Rosa Khutor
üìÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: 06.05.2024
```

# üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Python 3.10+

API –∫–ª—é—á–∏:

Telegram Bot Token (–æ—Ç @BotFather)

RapidAPI Key (–¥–ª—è Google Maps Places API)

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```commandline
git clone https://gitlab.skillbox.ru/bogdan_rengo/python_basic_diploma.git
cd python_basic_diploma
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```commandline
pip install -r requirements.txt
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
### –°–æ–∑–¥–∞–π—Ç–µ ```.env``` —Ñ–∞–π–ª:

```commandline
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
RAPIDAPI_KEY=–≤–∞—à_–∫–ª—é—á
DATABASE_URL=sqlite:///data/city_expert.db
DEBUG=False
LOG_LEVEL=INFO
```

4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ë–î:

```
bash
python create_tables.py
```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```
bash
python city_expert/main.py
```

# üìÑ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- API: Google Maps Places (—á–µ—Ä–µ–∑ RapidAPI)

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: SQLite (Peewee ORM)

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: Loguru (—Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ logs/)

- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: MVC-–ø–æ–¥–æ–±–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:
![Rosa_Khutor.png](images/Rosa_Khutor.png)